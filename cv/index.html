<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daniel Serbu | CV - Penetration Tester & Security Researcher</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a24;
            --accent-green: #00ff9d;
            --accent-green-dim: #00ff9d40;
            --accent-cyan: #00d4ff;
            --accent-purple: #a855f7;
            --accent-red: #ff3e3e;
            --text-primary: #e4e4e7;
            --text-secondary: #a1a1aa;
            --text-dim: #52525b;
            --border-color: #27272a;
            --glow-green: 0 0 20px rgba(0, 255, 157, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* Scanlines - excluded from PDF via class toggle */
        body.show-scanlines::before {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            background: repeating-linear-gradient(0deg, rgba(0,0,0,0.1) 0px, rgba(0,0,0,0.1) 1px, transparent 1px, transparent 2px);
            z-index: 9999;
        }

        nav {
            position: fixed;
            top: 0; left: 0; right: 0;
            z-index: 1000;
            padding: 1rem 2rem;
            background: rgba(10, 10, 15, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--accent-green);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .logo::before { content: '>'; animation: blink 1s step-end infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        .nav-links {
            display: flex;
            gap: 1.5rem;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.8rem;
            transition: color 0.3s ease;
        }
        .nav-links a:hover { color: var(--accent-green); }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: var(--accent-green);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* CV Page Layout */
        .cv-page-wrapper {
            padding: 6rem 2rem 4rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .cv-page-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .cv-page-header h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .cv-page-header h1 span { color: var(--accent-green); text-shadow: var(--glow-green); }

        .cv-page-header p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .cv-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            text-decoration: none;
            border: 1px solid var(--accent-green);
            transition: all 0.3s ease;
            cursor: pointer;
            border-radius: 4px;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--accent-green);
            color: var(--bg-primary);
        }
        .btn-primary:hover {
            box-shadow: var(--glow-green);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            color: var(--accent-green);
        }
        .btn-secondary:hover { background: var(--accent-green-dim); }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* CV Document - The printable content */
        .cv-document {
            background: #ffffff;
            color: #1a1a2e;
            border-radius: 4px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        /* ===== CV INTERNAL STYLES =====
           All styles below use ONLY hardcoded values.
           NO css variables, NO css grid, NO ::before pseudo-elements.
           This ensures html2canvas renders everything correctly. */

        .cv-content {
            padding: 32px 36px;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 10px;
            line-height: 1.45;
            color: #2d2d2d;
            background: #ffffff;
        }

        .cv-header {
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #1a1a2e;
            margin-bottom: 12px;
        }

        .cv-name {
            font-size: 22px;
            font-weight: 700;
            color: #1a1a2e;
            letter-spacing: 1px;
            margin-bottom: 2px;
        }

        .cv-title {
            font-size: 12px;
            color: #555;
            font-weight: 400;
            margin-bottom: 6px;
        }

        .cv-contact-row {
            text-align: center;
            font-size: 9px;
            color: #444;
            line-height: 1.6;
        }

        .cv-contact-row a {
            color: #1a5276;
            text-decoration: none;
        }

        .cv-contact-sep { color: #999; }

        /* Sections */
        .cv-section {
            margin-bottom: 10px;
        }

        .cv-section-title {
            font-size: 11px;
            font-weight: 700;
            color: #1a1a2e;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 2px;
            margin-bottom: 6px;
        }

        .cv-summary-text {
            font-size: 9.5px;
            color: #333;
            line-height: 1.5;
        }

        /* Experience */
        .cv-exp-item {
            margin-bottom: 8px;
        }

        .cv-exp-item:last-child {
            margin-bottom: 0;
        }

        .cv-exp-header {
            overflow: hidden;
            margin-bottom: 0;
        }

        .cv-exp-role {
            font-size: 10.5px;
            font-weight: 700;
            color: #1a1a2e;
            float: left;
        }

        .cv-exp-date {
            font-size: 9px;
            color: #666;
            float: right;
        }

        .cv-exp-company {
            clear: both;
            font-size: 9.5px;
            color: #555;
            font-style: italic;
            margin-bottom: 3px;
        }

        .cv-exp-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .cv-exp-list li {
            font-size: 9px;
            color: #444;
            padding-left: 10px;
            line-height: 1.5;
        }

        /* Bullet character is in the HTML itself, no ::before needed */

        /* Skills - use table layout instead of CSS grid */
        .cv-skills-table {
            width: 100%;
            border-collapse: collapse;
        }

        .cv-skills-table td {
            font-size: 9px;
            line-height: 1.6;
            padding: 1px 8px 1px 0;
            vertical-align: top;
            width: 50%;
        }

        .cv-skill-label {
            font-weight: 700;
            color: #1a1a2e;
        }

        .cv-skill-value {
            color: #444;
        }

        /* Certifications - use table layout instead of CSS grid */
        .cv-certs-table {
            width: 100%;
            border-collapse: collapse;
        }

        .cv-certs-table td {
            font-size: 9px;
            color: #333;
            padding: 1px 6px;
            vertical-align: top;
            width: 50%;
            line-height: 1.5;
        }

        .cv-cert-issuer {
            color: #777;
            font-size: 8px;
        }

        /* Education & Languages */
        .cv-edu-header {
            overflow: hidden;
        }

        .cv-edu-degree {
            font-size: 10.5px;
            font-weight: 700;
            color: #1a1a2e;
            float: left;
        }

        .cv-edu-year {
            font-size: 9px;
            color: #666;
            float: right;
        }

        .cv-edu-school {
            clear: both;
            font-size: 9.5px;
            color: #555;
            font-style: italic;
        }

        .cv-langs-row {
            font-size: 9.5px;
        }

        .cv-lang-name {
            font-weight: 700;
            color: #1a1a2e;
        }

        .cv-lang-level {
            color: #555;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            border-top: 1px solid var(--border-color);
            color: var(--text-dim);
            font-size: 0.85rem;
        }

        /* Notification */
        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(400px); opacity: 0; }
        }

        /* ===== Scale CV: applied during PDF generation ===== */
        body.scale-cv .cv-page-wrapper {
            padding: 0;
            max-width: 695px;
            margin: 0 auto;
        }

        body.scale-cv .cv-page-header,
        body.scale-cv nav,
        body.scale-cv footer {
            display: none;
        }

        body.scale-cv .cv-document {
            box-shadow: none;
            border-radius: 0;
        }

        body.scale-cv .cv-content {
            padding: 28px 32px;
            font-size: 9px;
        }

        body.scale-cv .cv-name { font-size: 20px; }
        body.scale-cv .cv-title { font-size: 11px; }
        body.scale-cv .cv-contact-row { font-size: 8.5px; }
        body.scale-cv .cv-section-title { font-size: 10px; }
        body.scale-cv .cv-summary-text { font-size: 9px; }
        body.scale-cv .cv-exp-role { font-size: 10px; }
        body.scale-cv .cv-exp-date { font-size: 8.5px; }
        body.scale-cv .cv-exp-company { font-size: 9px; }
        body.scale-cv .cv-exp-list li { font-size: 8.5px; }
        body.scale-cv .cv-skills-table td { font-size: 8.5px; }
        body.scale-cv .cv-certs-table td { font-size: 8.5px; }
        body.scale-cv .cv-cert-issuer { font-size: 7.5px; }
        body.scale-cv .cv-edu-degree { font-size: 10px; }
        body.scale-cv .cv-edu-year { font-size: 8.5px; }
        body.scale-cv .cv-edu-school { font-size: 9px; }
        body.scale-cv .cv-langs-row { font-size: 9px; }

        body.scale-cv.show-scanlines::before {
            display: none;
        }

        /* Print styles */
        @media print {
            body, body.show-scanlines { background: #fff !important; }
            body.show-scanlines::before { display: none !important; }
            nav, .cv-page-header, footer { display: none !important; }
            .cv-page-wrapper { padding: 0; max-width: none; }
            .cv-document { box-shadow: none; border-radius: 0; }
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0; right: 0;
                background: var(--bg-primary);
                flex-direction: column;
                padding: 1rem;
                border-bottom: 1px solid var(--border-color);
            }
            .nav-links.active { display: flex; }
            .mobile-menu-btn { display: block; }
        }

        @media (max-width: 768px) {
            .cv-page-wrapper { padding: 5rem 1rem 2rem; }
            .cv-content { padding: 24px 20px; }
        }
    </style>
</head>
<body class="show-scanlines">
    <nav>
        <div class="nav-container">
            <a href="/" class="logo">daniel_serbu</a>
            <button class="mobile-menu-btn" onclick="toggleMenu()">&#9776;</button>
            <ul class="nav-links" id="navLinks">
                <li><a href="/#about">About</a></li>
                <li><a href="/#links">Links</a></li>
                <li><a href="/#skills">Skills</a></li>
                <li><a href="/#certifications">Certs</a></li>
                <li><a href="/#experience">Experience</a></li>
                <li><a href="/#contact">Contact</a></li>
                <li><a href="/cv" style="color: var(--accent-green);">CV</a></li>
            </ul>
        </div>
    </nav>

    <div class="cv-page-wrapper">
        <div class="cv-page-header">
            <h1>Curriculum <span>Vitae</span></h1>
            <p>Professional CV ready for download. Click below to generate a PDF.</p>
            <div class="cv-actions">
                <button class="btn btn-primary" id="downloadBtn" onclick="downloadPDF()">Download PDF</button>
                <a href="/" class="btn btn-secondary">Back to Portfolio</a>
            </div>
        </div>

        <div class="cv-document">
            <div class="cv-content" id="cvContent">

                <div class="cv-header">
                    <div class="cv-name" id="cvName"></div>
                    <div class="cv-title" id="cvTitle"></div>
                    <div class="cv-contact-row" id="cvContactRow"></div>
                </div>

                <div class="cv-section">
                    <div class="cv-section-title">Professional Summary</div>
                    <div class="cv-summary-text" id="cvSummary"></div>
                </div>

                <div class="cv-section" id="cvExperience">
                    <div class="cv-section-title">Professional Experience</div>
                </div>

                <div class="cv-section" id="cvSkills">
                    <div class="cv-section-title">Technical Skills</div>
                    <table class="cv-skills-table" id="cvSkillsTable"></table>
                </div>

                <div class="cv-section" id="cvCertifications">
                    <div class="cv-section-title">Professional Certifications</div>
                    <table class="cv-certs-table" id="cvCertsTable"></table>
                </div>

                <div class="cv-section" id="cvEducation">
                    <div class="cv-section-title">Education</div>
                </div>

                <div class="cv-section" id="cvLanguages">
                    <div class="cv-section-title">Languages</div>
                    <div class="cv-langs-row" id="cvLangsRow"></div>
                </div>

            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2026 Daniel Serbu</p>
    </footer>

    <script>
        function toggleMenu() {
            document.getElementById('navLinks').classList.toggle('active');
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            let bgColor = '#00ff9d';
            if (type === 'error') bgColor = '#ff3e3e';
            if (type === 'info') bgColor = '#00d4ff';
            notification.style.cssText = `
                position: fixed; top: 100px; right: 20px;
                background: ${bgColor}; color: #0a0a0f;
                padding: 1rem 1.5rem; border-radius: 8px;
                font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;
                z-index: 10000; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, type === 'info' ? 5000 : 3000);
        }

        function addScaleCV() {
            document.body.classList.add('scale-cv');
        }

        function removeScaleCV() {
            document.body.classList.remove('scale-cv');
        }

        function generateResume() {
            const areaCV = document.getElementById('cvContent');
            let opt = {
                margin: 0,
                filename: 'Daniel_Serbu_CV.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 4, useCORS: true },
                jsPDF: { format: 'a4', orientation: 'portrait' }
            };
            html2pdf(areaCV, opt);
        }

        function downloadPDF() {
            showNotification('Generating PDF...', 'info');
            addScaleCV();
            generateResume();
            setTimeout(removeScaleCV, 2000);
            setTimeout(function() {
                showNotification('PDF downloaded successfully!');
            }, 2500);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        async function loadProfileData() {
            try {
                const response = await fetch('/profile-data.json');
                if (!response.ok) return;
                const data = await response.json();

                // Header
                const nameEl = document.getElementById('cvName');
                if (nameEl) nameEl.textContent = data.name ? data.name.toUpperCase() : '';

                const titleEl = document.getElementById('cvTitle');
                if (titleEl) titleEl.innerHTML = escapeHtml(data.title || '');

                const contactRow = document.getElementById('cvContactRow');
                if (contactRow) {
                    const sep = '<span class="cv-contact-sep">&nbsp;|&nbsp;</span>';
                    contactRow.innerHTML = [
                        escapeHtml(data.locationShort || data.location || ''),
                        `<a href="mailto:${escapeHtml(data.email)}">${escapeHtml(data.email)}</a>`,
                        `<a href="${escapeHtml(data.linkedin)}">${escapeHtml(data.linkedinShort)}</a>`,
                        `<a href="${escapeHtml(data.github)}">${escapeHtml(data.githubShort)}</a>`,
                        `<a href="https://${escapeHtml(data.website)}">${escapeHtml(data.website)}</a>`
                    ].join(sep);
                }

                // Summary
                const summaryEl = document.getElementById('cvSummary');
                if (summaryEl) summaryEl.textContent = data.cvSummary || data.summary || '';

                // Experience
                if (data.experience) {
                    const expSection = document.getElementById('cvExperience');
                    if (expSection) {
                        data.experience.forEach(exp => {
                            const dateRange = exp.current ? `${exp.startDate} - Present` : `${exp.startDate} - ${exp.endDate}`;
                            const responsibilities = exp.responsibilities
                                .map(r => `<li>&#8226; ${escapeHtml(r)}</li>`)
                                .join('');
                            const item = document.createElement('div');
                            item.className = 'cv-exp-item';
                            item.innerHTML = `
                                <div class="cv-exp-header">
                                    <div class="cv-exp-role">${escapeHtml(exp.title)}</div>
                                    <div class="cv-exp-date">${escapeHtml(dateRange)}</div>
                                </div>
                                <div class="cv-exp-company">${escapeHtml(exp.company)} - ${escapeHtml(exp.location)}</div>
                                <ul class="cv-exp-list">${responsibilities}</ul>
                            `;
                            expSection.appendChild(item);
                        });
                    }
                }

                // Skills
                if (data.skills) {
                    const skillsTable = document.getElementById('cvSkillsTable');
                    if (skillsTable) {
                        for (let i = 0; i < data.skills.length; i += 2) {
                            const row = document.createElement('tr');
                            const skill1 = data.skills[i];
                            const skill2 = data.skills[i + 1];
                            const label1 = skill1.cvCategory || skill1.category;
                            const value1 = (skill1.cvTags || skill1.tags).join(', ');
                            let cell2Html = '';
                            if (skill2) {
                                const label2 = skill2.cvCategory || skill2.category;
                                const value2 = (skill2.cvTags || skill2.tags).join(', ');
                                cell2Html = `<td><span class="cv-skill-label">${escapeHtml(label2)}: </span><span class="cv-skill-value">${escapeHtml(value2)}</span></td>`;
                            } else {
                                cell2Html = '<td></td>';
                            }
                            row.innerHTML = `<td><span class="cv-skill-label">${escapeHtml(label1)}: </span><span class="cv-skill-value">${escapeHtml(value1)}</span></td>${cell2Html}`;
                            skillsTable.appendChild(row);
                        }
                    }
                }

                // Certifications
                if (data.certifications) {
                    const certsTable = document.getElementById('cvCertsTable');
                    if (certsTable) {
                        for (let i = 0; i < data.certifications.length; i += 2) {
                            const row = document.createElement('tr');
                            const cert1 = data.certifications[i];
                            const cert2 = data.certifications[i + 1];
                            const cell1 = `<td>&#8226; ${escapeHtml(cert1.shortName)} - ${escapeHtml(cert1.fullName)} <span class="cv-cert-issuer">(${escapeHtml(cert1.issuer)})</span></td>`;
                            let cell2 = '<td></td>';
                            if (cert2) {
                                cell2 = `<td>&#8226; ${escapeHtml(cert2.shortName)} - ${escapeHtml(cert2.fullName)} <span class="cv-cert-issuer">(${escapeHtml(cert2.issuer)})</span></td>`;
                            }
                            row.innerHTML = cell1 + cell2;
                            certsTable.appendChild(row);
                        }
                    }
                }

                // Education
                if (data.education) {
                    const eduSection = document.getElementById('cvEducation');
                    if (eduSection) {
                        data.education.forEach(edu => {
                            const eduDiv = document.createElement('div');
                            eduDiv.innerHTML = `
                                <div class="cv-edu-header">
                                    <div class="cv-edu-degree">${escapeHtml(edu.degree)}</div>
                                    <div class="cv-edu-year">${escapeHtml(edu.startYear)} - ${escapeHtml(edu.endYear)}</div>
                                </div>
                                <div class="cv-edu-school">${escapeHtml(edu.school)}</div>
                            `;
                            eduSection.appendChild(eduDiv);
                        });
                    }
                }

                // Languages
                if (data.languages) {
                    const langsRow = document.getElementById('cvLangsRow');
                    if (langsRow) {
                        langsRow.innerHTML = data.languages
                            .map(lang => `<span class="cv-lang-name">${escapeHtml(lang.name)}</span> - <span class="cv-lang-level">${escapeHtml(lang.level)}</span>`)
                            .join('&nbsp;&nbsp;&nbsp;&nbsp;');
                    }
                }

            } catch (error) {
                console.warn('Using static CV content:', error);
            }
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadProfileData);
        } else {
            loadProfileData();
        }
    </script>
</body>
</html>
